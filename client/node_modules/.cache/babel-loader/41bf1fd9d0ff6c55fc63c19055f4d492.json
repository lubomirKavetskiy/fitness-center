{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useMutation, useQueryClient } from 'react-query';\nimport { axiosInstance } from '../../../axiosInstance';\nimport { queryKeys } from '../../../react-query/constants';\nimport { useCustomToast } from '../../app/hooks/useCustomToast'; // for when server call is needed\n\nasync function removeAppointmentUser(appointment) {\n  const patchData = [{\n    op: 'remove',\n    path: '/userId'\n  }];\n  await axiosInstance.patch(`/appointment/${appointment.id}`, {\n    data: patchData\n  });\n} // TODO: update return type\n\n\nexport function useCancelAppointment() {\n  _s();\n\n  const toast = useCustomToast();\n  const queryClient = useQueryClient();\n  const {\n    mutate\n  } = useMutation(appointment => removeAppointmentUser(appointment), {\n    onSuccess: () => {\n      queryClient.invalidateQueries([queryKeys.appointments]);\n      toast({\n        title: 'You have canceled your appointment!',\n        status: 'success'\n      });\n    }\n  });\n  return mutate;\n}\n\n_s(useCancelAppointment, \"5+/i7P7x/0kCNYxxAhRcSfpmsIM=\", false, function () {\n  return [useCustomToast, useQueryClient, useMutation];\n});","map":{"version":3,"sources":["/Users/work/Documents/Projects/study/react-query/base-lazy-days/client/src/components/appointments/hooks/useCancelAppointment.ts"],"names":["useMutation","useQueryClient","axiosInstance","queryKeys","useCustomToast","removeAppointmentUser","appointment","patchData","op","path","patch","id","data","useCancelAppointment","toast","queryClient","mutate","onSuccess","invalidateQueries","appointments","title","status"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,cAAtB,QAA4C,aAA5C;AAGA,SAASC,aAAT,QAA8B,wBAA9B;AACA,SAASC,SAAT,QAA0B,gCAA1B;AACA,SAASC,cAAT,QAA+B,gCAA/B,C,CAEA;;AACA,eAAeC,qBAAf,CAAqCC,WAArC,EAA8E;AAC5E,QAAMC,SAAS,GAAG,CAAC;AAAEC,IAAAA,EAAE,EAAE,QAAN;AAAgBC,IAAAA,IAAI,EAAE;AAAtB,GAAD,CAAlB;AAEA,QAAMP,aAAa,CAACQ,KAAd,CAAqB,gBAAeJ,WAAW,CAACK,EAAG,EAAnD,EAAsD;AAC1DC,IAAAA,IAAI,EAAEL;AADoD,GAAtD,CAAN;AAGD,C,CAED;;;AACA,OAAO,SAASM,oBAAT,GAAoE;AAAA;;AACzE,QAAMC,KAAK,GAAGV,cAAc,EAA5B;AACA,QAAMW,WAAW,GAAGd,cAAc,EAAlC;AAEA,QAAM;AAAEe,IAAAA;AAAF,MAAahB,WAAW,CAC3BM,WAAD,IAA8BD,qBAAqB,CAACC,WAAD,CADvB,EAE5B;AACEW,IAAAA,SAAS,EAAE,MAAM;AACfF,MAAAA,WAAW,CAACG,iBAAZ,CAA8B,CAACf,SAAS,CAACgB,YAAX,CAA9B;AACAL,MAAAA,KAAK,CAAC;AACJM,QAAAA,KAAK,EAAE,qCADH;AAEJC,QAAAA,MAAM,EAAE;AAFJ,OAAD,CAAL;AAID;AAPH,GAF4B,CAA9B;AAaA,SAAOL,MAAP;AACD;;GAlBeH,oB;UACAT,c,EACMH,c,EAEDD,W","sourcesContent":["import { useMutation, useQueryClient } from 'react-query';\n\nimport { Appointment } from '../../../../../shared/types';\nimport { axiosInstance } from '../../../axiosInstance';\nimport { queryKeys } from '../../../react-query/constants';\nimport { useCustomToast } from '../../app/hooks/useCustomToast';\n\n// for when server call is needed\nasync function removeAppointmentUser(appointment: Appointment): Promise<void> {\n  const patchData = [{ op: 'remove', path: '/userId' }];\n\n  await axiosInstance.patch(`/appointment/${appointment.id}`, {\n    data: patchData,\n  });\n}\n\n// TODO: update return type\nexport function useCancelAppointment(): (appointment: Appointment) => void {\n  const toast = useCustomToast();\n  const queryClient = useQueryClient();\n\n  const { mutate } = useMutation(\n    (appointment: Appointment) => removeAppointmentUser(appointment),\n    {\n      onSuccess: () => {\n        queryClient.invalidateQueries([queryKeys.appointments]);\n        toast({\n          title: 'You have canceled your appointment!',\n          status: 'success',\n        });\n      },\n    },\n  );\n\n  return mutate;\n}\n"]},"metadata":{},"sourceType":"module"}